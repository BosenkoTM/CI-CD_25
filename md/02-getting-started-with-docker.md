# Урок 2: Начало работы с Docker

## Введение в Docker

Docker — это платформа с открытым исходным кодом, которая автоматизирует развертывание, масштабирование и управление приложениями с помощью контейнеризации. С Docker вы можете легко создавать, развертывать и запускать приложения в контейнерах, обеспечивая согласованность в различных средах.

## Шаг 1: Установка Docker на локальном компьютере

### Для Windows

1. **Загрузите Docker Desktop**:
- Перейдите на страницу [Docker Desktop для Windows](https://www.docker.com/products/docker-desktop) и загрузите установщик.

2. **Установите Docker Desktop**:
- Запустите загруженный установщик и следуйте инструкциям на экране. Убедитесь, что вы включили функцию WSL 2, если будет предложено.

3. **Запустите Docker Desktop**:
- После установки запустите Docker Desktop из меню «Пуск». Для запуска Docker может потребоваться несколько минут.

### Для macOS

1. **Скачать Docker Desktop**:
- Посетите страницу [Docker Desktop для Mac](https://www.docker.com/products/docker-desktop) и загрузите установщик.

2. **Установить Docker Desktop**:
- Откройте загруженный файл `.dmg` и перетащите значок Docker в папку Applications.

3. **Запустить Docker Desktop**:
- Запустить Docker из папки Applications. Подождите, пока Docker инициализируется.

### Для Linux

1. **Установите Docker Engine**:
- Откройте терминал и выполните следующие команды в зависимости от вашего дистрибутива Linux:

- **Для Ubuntu**:
```bash
sudo apt update
sudo apt install docker.io
```

- **Для CentOS**:
```bash
sudo yum install docker
```

- **Для Fedora**:
```bash
sudo dnf install docker
```

2. **Запустите Docker**:
- После установки запустите службу Docker:
```bash
sudo systemctl start docker
```

3. **Включите Docker для запуска при загрузке**:
```bash
sudo systemctl enable docker
```

## Шаг 2. Проверка установки

Чтобы убедиться, что Docker установлен правильно, откройте терминал или командную строку и запустите следующая команда:

```bash
docker --version
```

Вы должны увидеть вывод, похожий на:

```
Docker version 20.10.7, build f0df350
```

Далее выполните следующую команду, чтобы убедиться, что Docker запущен:

```bash
docker run hello-world
```

Эта команда загружает тестовый образ и запускает его в контейнере. Если все работает правильно, вы увидите сообщение, подтверждающее, что Docker успешно установлен.

## Шаг 3: Ознакомьтесь с Docker CLI

Интерфейс командной строки Docker (CLI) позволяет взаимодействовать с демоном Docker для управления контейнерами, образами и другими ресурсами. Вот несколько основных команд, с которых можно начать:

### 1. **Список образов Docker**

Чтобы просмотреть образы на локальном компьютере, используйте:

```bash
docker images
```

### 2. **Список запущенных контейнеров**

Чтобы просмотреть контейнеры, которые в данный момент запущены, используйте:

```bash
docker ps
```

### 3. **Список всех контейнеров**

Чтобы просмотреть все контейнеры, включая остановленные, используйте:

```bash
docker ps -a
```

### 4. **Извлечение образа из Docker Hub**

Чтобы загрузить образ из Docker Hub (реестр по умолчанию), используйте:

```bash
docker pull <image-name>
```

Например, чтобы извлечь последнюю версию образа Ubuntu:

```bash
docker pull ubuntu
```

### 5. **Запустить контейнер**

Чтобы создать и запустить новый контейнер из образа, используйте:

```bash
docker run -it <image-name>
```

Например, чтобы запустить интерактивный контейнер Ubuntu:

```bash
docker run -it ubuntu
```

### 6. **Остановить работающий контейнер**

Чтобы остановить работающий контейнер, используйте:

```bash
docker stop <container-id>
```

Идентификатор контейнера можно узнать с помощью команды `docker ps`.

### 7. **Удаление контейнера**

Чтобы удалить остановленный контейнер, используйте:

```bash
docker rm <container-id>
```

### 8. **Удаление образа**

Чтобы удалить образ с локальной машины, используйте:

```bash
docker rmi <image-name>
```

## Заключение

В этом уроке вы узнали, как установить Docker на локальную машину и проверить установку. Вы также познакомились с основными командами Docker CLI для управления образами и контейнерами. В следующем уроке мы более подробно рассмотрим образы и контейнеры Docker, изучив, как эффективно их создавать и управлять ими.

## Лабораторная работа 1. Установка и настройка Docker. Работа с контейнерами в Docker

Цель работы: освоить процесс установки и настройки Docker, научиться работать с контейнерами и образами Docker.

## Задачи:
1. Установить Docker на локальный компьютер.
2. Проверить корректность установки `Docker`.
3. Ознакомиться с основными командами `Docker CLI` для работы с образами и контейнерами.
4. Выполнить индивидуальное задание.

## Критерии оценки:
- Корректность установки `Docker` (**2** балла).
- Правильность выполнения команд `Docker` CLI (**3** балла).
- Выполнение индивидуального задания (**5** баллов).

## Ход работы

(пример для Варианта 25 на Ubuntu 20.04):

1. Установка `Docker`.
- Откройте терминал и выполните следующие команды для установки Docker:
  ```
  sudo apt update
  sudo apt install apt-transport-https ca-certificates curl gnupg lsb-release
  curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
  echo "deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
  sudo apt update
  sudo apt install docker-ce docker-ce-cli containerd.io
  ```
- После завершения установки добавьте своего пользователя в группу docker, чтобы избежать необходимости использования sudo при выполнении команд Docker:
  ```
  sudo usermod -aG docker $USER
  newgrp docker
  ```
2. Проверка установки `Docker`.
- Выполните команду `docker --version`, чтобы убедиться, что Docker установлен правильно. Вывод должен содержать информацию о версии Docker.
- Выполните команду `docker run hello-world`, чтобы проверить, что Docker запущен и может загружать образы и запускать контейнеры.

3. Знакомство с основными командами `Docker CLI`.
- Выполните команду `docker images`, чтобы просмотреть список локальных образов Docker.
- Выполните команду `docker ps`, чтобы просмотреть список запущенных контейнеров.
- Выполните команду `docker ps -a`, чтобы просмотреть список всех контейнеров, включая остановленные.

4. Выполнение индивидуального задания (Вариант 25).
- Загрузите образ `sonarqube`, выполнив команду `docker pull sonarqube`.
- Запустите контейнер `sonarqube` с маршрутизацией портов 9000 и 9092:
  ```
  docker run -d --name sonarqube -p 9000:9000 -p 9092:9092 sonarqube
  ```
- Откройте веб-браузер и перейдите по адресу `http://localhost:9000`. Вы должны увидеть страницу входа в SonarQube.
- Выполните начальную настройку `SonarQube`:
  - Войдите в систему, используя учетные данные по умолчанию (логин: `admin`, пароль: `admin`).
  - Измените пароль администратора при запросе.
  - Нажмите "Create new project" и следуйте инструкциям для создания нового проекта.
  - После создания проекта вы увидите инструкции по настройке анализа кода для различных языков программирования.
- Когда завершите изучение `SonarQube`, остановите и удалите контейнер:
  ```
  docker stop sonarqube
  docker rm sonarqube
  ```

### Индивидуальные задания.

**Вариант 1**. Загрузить образ `nginx`, запустить контейнер, настроить маршрутизацию портов и проверить доступность веб-сервера.

**Вариант 2**. Загрузить образ `mysql`, запустить контейнер, настроить переменные среды для установки пароля root и создать новую базу данных.

**Вариант 3**. Загрузить образ `python`, запустить контейнер и выполнить простой Python-скрипт внутри контейнера.

**Вариант 4**. Загрузить образ `httpd`, запустить контейнер, смонтировать локальную директорию с HTML-файлами внутрь контейнера и проверить доступность веб-сервера.

**Вариант 5**. Загрузить образ `redis`, запустить контейнер, подключиться к `Redis CLI` внутри контейнера и выполнить несколько команд.

**Вариант 6**. Загрузить образ `node`, запустить контейнер и создать простое приложение `Express.js` внутри контейнера.

**Вариант 7**. Загрузить образ `postgres`, запустить контейнер, настроить переменные среды для установки пароля пользователя и создать новую таблицу в базе данных.

**Вариант 8**. Загрузить образ `mongo`, запустить контейнер, подключиться к MongoDB внутри контейнера и создать новую коллекцию.

**Вариант 9**. Загрузить образ `rabbitmq`, запустить контейнер, включить панель управления и создать новую очередь сообщений.

**Вариант 10**. Загрузить образ `elasticsearch`, запустить контейнер, настроить маршрутизацию портов и проверить доступность `Elasticsearch` через REST API.

**Вариант 11**. Загрузить образ `jenkins`, запустить контейнер, настроить маршрутизацию портов и выполнить начальную настройку `Jenkins`.

**Вариант 12**. Загрузить образ `grafana`, запустить контейнер, настроить маршрутизацию портов и добавить новый источник данных.

**Вариант 13**. Загрузить образ prometheus`, запустить контейнер, настроить конфигурацию Prometheus для сбора метрик и проверить доступность веб-интерфейса.

**Вариант 14**. Загрузить образ `redis`, запустить контейнер, настроить персистентность данных с помощью тома `Docker`.

**Вариант 15**. Загрузить образ `wordpress`, запустить контейнер, настроить переменные среды для подключения к базе данных и проверить доступность веб-сайта `WordPress`.

**Вариант 16**. Загрузить образ `drupal`, запустить контейнер, настроить маршрутизацию портов и выполнить начальную настройку `Drupal`.

**Вариант 17**. Загрузить образ `phpmyadmin`, запустить контейнер, настроить переменные среды для подключения к серверу `MySQL` и проверить доступность веб-интерфейса `phpMyAdmin`.

**Вариант 18**. Загрузить образ `minio`, запустить контейнер, настроить учетные данные доступа и загрузить файл в хранилище `Minio`.

**Вариант 19**. Загрузить образ `owncloud`, запустить контейнер, настроить маршрутизацию портов и выполнить начальную настройку `ownCloud`.

**Вариант 20**. Загрузить образ `nextcloud`, запустить контейнер, настроить переменные среды для подключения к базе данных и проверить доступность веб-интерфейса `Nextcloud`.

**Вариант 21**. Загрузить образ `gitlab`, запустить контейнер, настроить маршрутизацию портов и создать новый проект в `GitLab`.

**Вариант 22**. Загрузить образ `joomla`, запустить контейнер, настроить переменные среды для подключения к базе данных и проверить доступность веб-сайта `Joomla`.

**Вариант 23**. Загрузить образ `mariadb`, запустить контейнер, настроить переменные среды для установки пароля root и создать нового пользователя базы данных.

**Вариант 24**. Загрузить образ `tomcat`, запустить контейнер, смонтировать локальную директорию с веб-приложением внутрь контейнера и проверить доступность приложения.

**Вариант 25**. Загрузить образ `sonarqube`, запустить контейнер, настроить маршрутизацию портов и выполнить начальную настройку `SonarQube`.

### Форма отчета:
1. Титульный лист(в электронном виде).
2. Цель работы.
3. Ход выполнения работы (с указанием использованных команд и их результатов).
4. Выводы по работе.
5. Ответы на контрольные вопросы.

### Контрольные вопросы:
Что такое Docker и для чего он используется?
Какие преимущества дает использование контейнеров Docker по сравнению с виртуальными машинами?
Что такое образ Docker и как он связан с контейнерами?
Какие основные команды Docker CLI вы узнали в ходе выполнения лабораторной работы?
Как можно настроить маршрутизацию портов при запуске контейнера Docker?



