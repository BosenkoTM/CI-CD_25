# Урок 3: Понимание образов и контейнеров Docker

## Что такое образы Docker?

**Образ Docker** — это легкий, автономный и исполняемый пакет, который включает в себя все необходимое для запуска программного обеспечения, включая код, среду выполнения, библиотеки, переменные среды и файлы конфигурации. Образы — это шаблоны, доступные только для чтения, используемые для создания контейнеров.

### Основные характеристики образов Docker:
- **Неизменяемость**: После создания образы нельзя изменить. Любые изменения требуют создания нового образа.
- **Многослойность**: Образы создаются слоями, что обеспечивает эффективное хранение и совместное использование. Каждый слой представляет собой изменение или дополнение к образу.
- **Переносимость**: Образы можно совместно использовать и запускать в любой системе, в которой установлен Docker, что обеспечивает согласованность в разных средах.

## Что такое контейнеры Docker?

**Контейнер Docker** — это запускаемый экземпляр образа Docker. Контейнеры создаются из образов и могут быть запущены, остановлены, перемещены и удалены. В отличие от образов, контейнеры изменяемы и могут изменяться во время выполнения.

### Ключевые характеристики контейнеров Docker:
- **Изолированные**: каждый контейнер работает в своей собственной среде, изолированной от других контейнеров и хост-системы.
- **Эфемерные**: контейнеры можно быстро создавать и уничтожать. Их также можно останавливать и запускать без потери состояния, если они настроены на использование постоянного хранилища.
- **Легкие**: контейнеры используют ядро ​​ОС хоста, что делает их более эффективными, чем традиционные виртуальные машины.

## Разница между образами Docker и контейнерами

| Функция | Образ Docker | Контейнер Docker |
|---------------------------------|----|------------------------------------|
| Определение | Шаблон только для чтения для создания контейнеров | Запущенный экземпляр образа |
| Состояние | Неизменяемый | Изменяемый |
| Назначение | Используется для создания контейнеров | Выполняет приложения |
| Хранилище | Хранится в виде слоев | Использует образ для запуска процессов |
| Жизненный цикл | Сборка и управление версиями | Создано, запущено, остановлено, удалено |

## Создание контейнеров Docker

Чтобы создать контейнер Docker, вам нужно использовать команду `docker run`, за которой следует имя образа. Вот как это сделать:

### Шаг 1: Извлечение образа

Перед созданием контейнера убедитесь, что у вас есть нужный образ. Например, чтобы извлечь последний образ Ubuntu, выполните:

```bash
docker pull ubuntu
```

### Шаг 2: Создание и запуск контейнера

Чтобы создать и запустить контейнер из образа Ubuntu, используйте следующую команду:

```bash
docker run -it ubuntu
```

- Флаги `-it` позволяют запускать контейнер в интерактивном режиме с помощью терминала.

### Шаг 3: Доступ к контейнеру

После запуска контейнера вы окажетесь внутри оболочки Ubuntu. Вы можете запускать команды так же, как если бы использовали обычный терминал.

## Управление контейнерами Docker

### 1. **Список контейнеров**

Чтобы увидеть все запущенные контейнеры, используйте:

```bash
docker ps
```

Чтобы вывести список всех контейнеров, включая остановленные, используйте:

```bash
docker ps -a
```

### 2. **Остановка контейнера**

Чтобы остановить запущенный контейнер, используйте следующую команду, заменив `<container-id>` на фактический идентификатор или имя контейнера:

```bash
docker stop <container-id>
```

### 3. **Запуск остановленного контейнера**

Чтобы запустить остановленный контейнер, используйте:

```bash
docker start <container-id>
```

### 4. **Удаление контейнера**

Чтобы удалить контейнер, сначала убедитесь, что он остановлен. Затем используйте:

```bash
docker rm <container-id>
```

### 5. **Удаление всех остановленных контейнеров**

Чтобы удалить все остановленные контейнеры одновременно, выполните:

```bash
docker container prune
```

Вам будет предложено подтвердить действие.

## Создание контейнера с помощью пользовательских команд

Вы также можете создать и запустить контейнер во время выполнения определенной команды. Например, чтобы запустить простую команду в контейнере Ubuntu, используйте:

```bash
docker run ubuntu echo "Hello, Docker!"
```

Эта команда создаст новый контейнер, выполнит команду `echo`, а затем выйдет.

## Заключение

В этом уроке вы узнали разницу между образами Docker и контейнерами, а также о том, как создавать, управлять и удалять контейнеры Docker. Понимание этих концепций имеет решающее значение для эффективного использования Docker в вашем рабочем процессе разработки. На следующем уроке мы рассмотрим, как создать свой первый образ Docker с помощью Dockerfile.
